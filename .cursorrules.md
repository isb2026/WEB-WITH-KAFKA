# MSA React Monorepo - AI Development Rules

## 🎯 **프로젝트 선택 가이드**

**⚠️ 중요: 작업을 시작하기 전에 반드시 어떤 프로젝트를 작업할지 확인하세요!**

### **📋 사용 가능한 프로젝트**

| 프로젝트      | 설명             | 기술 스택             | 문서                              |
| ------------- | ---------------- | --------------------- | --------------------------------- |
| **🎯 Primes** | ERP 시스템       | Radix UI + Tailwind   | [가이드](./docs/primes/README.md) |
| **🌱 ESG**    | 지속가능성 관리  | Falcon UI + Bootstrap | [가이드](./docs/esg/README.md)    |
| **🤖 AIPS**   | AI 생산성 시스템 | Radix UI + Tailwind   | [가이드](./docs/aips/README.md)   |
| **📦 SCM**    | 공급망 관리      | Radix UI + Tailwind   | [가이드](./docs/scm/README.md)    |

### **🚀 프로젝트 결정 워크플로우**

```bash
1. 사용자 요청 분석
   ↓
2. "어떤 프로젝트에서 작업하시겠습니까?" 질문
   ↓
3. 프로젝트별 문서 참조
   ↓
4. 해당 프로젝트 패턴으로 개발 진행
```

**💡 예시 질문:**

- "거래처 관리 기능이 필요하다면 → **Primes** 프로젝트"
- "탄소배출 대시보드가 필요하다면 → **ESG** 프로젝트"
- "AI 기반 분석이 필요하다면 → **AIPS** 프로젝트"
- "공급업체 관리가 필요하다면 → **SCM** 프로젝트"

---

## 🏗️ **Monorepo 전체 구조**

### **📁 디렉토리 구조**

```
msa-react-monorepo/
├── 📱 apps/                    # 각 프로젝트 애플리케이션
│   ├── primes/                 # ERP 시스템
│   ├── esg/                    # ESG 관리 시스템
│   ├── aips/                   # AI 생산성 시스템
│   └── scm/                    # 공급망 관리 시스템
├── 📦 packages/                # 공유 패키지
│   ├── radix-ui/              # Radix UI 컴포넌트 (Primes, AIPS, SCM)
│   ├── falcon-ui/             # Bootstrap 컴포넌트 (ESG)
│   ├── moornmo-ui/            # Material-UI 컴포넌트
│   ├── utils/                 # 공통 유틸리티
│   └── echart/                # 차트 컴포넌트
├── 🛠️ mcp/                     # AI 코드 생성 시스템
├── 📚 docs/                    # 프로젝트별 문서
└── 🔧 tools/                   # 개발 도구
```

### **🎨 UI 프레임워크 매핑**

- **Primes, AIPS, SCM**: Radix UI + Tailwind CSS
- **ESG**: Falcon UI + Bootstrap + Material-UI

---

## 🎯 **공통 개발 원칙**

### **🔄 MCP 우선 개발**

**모든 코드 생성은 MCP(Model Context Protocol) 시스템을 우선 사용하세요.**

#### **✅ MCP 서버 자동 실행**

```bash
# MCP 서버는 Cursor IDE가 자동으로 관리합니다
# 백그라운드 실행 불필요
# Cursor IDE 시작 시 자동 실행
# 수동 프로세스 관리 불필요
```

#### **필수 MCP 워크플로우**

```bash
# 1. 프로젝트 확인
"어떤 프로젝트에서 작업하시겠습니까?"

# 2. API 확인 (서비스 개발 시)
sg-overview → sg-suggest → sg-analyze → swagger

# 3. 페이지/컴포넌트 생성
pp "요청사항"

# 4. 코드 검증 및 개선
pv → pfix (필요시)
```

#### **🚨 필수 규칙**

- **NEVER** 수동으로 서비스 코드 작성 (Swagger 기반 생성 필수)
- **ALWAYS** 해당 프로젝트 문서 먼저 확인
- **REQUIRED** 필드 검증: `sg-validate domain module "fields"`

### **🏗️ 아키텍처 패턴**

#### **공통 레이어 구조**

```
📱 Presentation Layer (UI Components)
    ↓
🎯 Business Logic Layer (Custom Hooks)
    ↓
🔧 Service Layer (API Integration)
    ↓
🌐 API Layer (Backend REST/GraphQL)
```

#### **공통 파일 명명 규칙**

- **Components**: PascalCase (`VendorListPage.tsx`)
- **Hooks**: camelCase with 'use' prefix (`useVendor.ts`)
- **Services**: camelCase with 'Service' suffix (`vendorService.ts`)
- **Types**: camelCase (`vendor.ts`)
- **Directories**: kebab-case (`ini/vendor/`)

### **🔒 보안 및 품질**

#### **cleanedParams 패턴 (필수)**

```typescript
// 모든 CREATE/UPDATE 서비스에서 필수 적용
export const createEntity = async (data: Partial<CreateEntityPayload>) => {
	// Swagger 검증된 필드만 추출
	const { field1, field2, field3 } = data;

	const cleanedParams = { field1, field2, field3 };

	const res = await FetchApiPost('/api/entity', cleanedParams);
	// 에러 처리 포함
};
```

#### **Atomic Hooks 패턴**

```typescript
// 단일 책임 원칙 준수
useCreateEntity(); // 생성 전용
useUpdateEntity(); // 수정 전용
useDeleteEntity(); // 삭제 전용
useEntityListQuery(); // 목록 조회 전용
useEntityByIdQuery(); // 단일 조회 전용
useEntityFieldQuery(); // Field API 전용 (독립적)

// 복합 훅 (Field API 제외)
useEntity(); // CRUD 작업 통합
```

#### **통합 스키마 시스템**

```typescript
// 한 번 정의로 다중 출력
FieldSchema({
	name: 'entityName',
	label: '엔티티명',
	type: FieldType.TEXT,
	required: true,
	searchable: true,
	sortable: true,
});

// 자동 생성:
// - searchFields: 검색 필드 정의
// - tableColumns: 테이블 컬럼 정의
// - formFields: 폼 필드 정의
```

---

## 🎨 **프로젝트별 특화 패턴**

### **🎯 Primes (ERP 시스템)**

- **UI**: Radix UI + Tailwind CSS
- **패턴**: Modal CRUD, Master-Detail, Tab Navigation
- **도메인**: ini, sales, purchase, production, machine, mold
- **문서**: [Primes 가이드](./docs/primes/README.md)

### **🌱 ESG (지속가능성 관리)**

- **UI**: Falcon UI + Bootstrap
- **패턴**: Dashboard, Chart Widgets, KPI Cards, Form Wizard
- **프레임워크**: GRI, SASB, TCFD, CDP
- **문서**: [ESG 가이드](./docs/esg/README.md)

### **🤖 AIPS (AI 생산성 시스템)**

- **UI**: Radix UI + Tailwind CSS
- **패턴**: AI Integration, Real-time Processing
- **문서**: [AIPS 가이드](./docs/aips/README.md)

### **📦 SCM (공급망 관리)**

- **UI**: Radix UI + Tailwind CSS
- **패턴**: Supply Chain Workflows, Logistics
- **문서**: [SCM 가이드](./docs/scm/README.md)

---

## 🛠️ **MCP 시스템 통합**

### **🎯 MCP 명령어 우선순위**

| 우선순위       | 명령어        | 목적                     | 사용 시점          |
| -------------- | ------------- | ------------------------ | ------------------ |
| **🥇 HIGHEST** | `swagger`     | Swagger 기반 서비스 생성 | 서비스 레이어 개발 |
| **🥈 HIGH**    | `pp`          | 페이지/컴포넌트 생성     | UI 개발            |
| **🥉 MEDIUM**  | `sg-validate` | 필드 검증                | 서비스 개발 전     |
| **🔸 LOW**     | `pv`, `pfix`  | 코드 검증/개선           | 품질 확인          |

### **🌐 Swagger API 워크플로우**

```bash
# 필수 순서 (서비스 개발 시)
sg-overview          # 1. 도메인 확인
sg-suggest "요청"    # 2. 모듈 추천
sg-analyze           # 3. 호환성 분석
swagger Module       # 4. 서비스 생성
sg-validate          # 5. 필드 검증
```

### **🎨 템플릿 시스템**

#### **프로젝트별 자동 생성**

```bash
# Primes 예시
pp "Vendor 리스트 페이지 만들어줘"
→ SinglePage, TabNavigation, CustomSelect, AtomicHooks 생성

# ESG 예시
pp "CarbonEmission 대시보드 만들어줘"
→ DashboardPage, ChartWidget, KPICard, FormWizard 생성
```

---

## 🌍 **국제화 및 접근성**

### **다국어 지원**

- **Primary**: 한국어 (ko)
- **Secondary**: 영어 (en)
- **구조**: 계층적 번역 키 (`tabs.titles.vendor`)

### **접근성 기준**

- **WCAG 2.1 AA** 준수
- **키보드 네비게이션** 지원
- **스크린 리더** 호환성

---

## 📊 **성능 및 품질 관리**

### **성능 최적화**

- **Lazy Loading**: 라우트 및 컴포넌트
- **React.memo**: 비용이 큰 컴포넌트
- **React Query**: 효율적인 캐싱
- **Bundle Splitting**: 동적 임포트

### **코드 품질**

- **TypeScript Strict Mode**: 타입 안전성
- **ESLint + Prettier**: 코드 스타일 통일
- **Husky**: Git Hook 품질 게이트

---

## 🔧 **개발 환경 설정**

### **필수 도구**

- **Node.js**: 18.x 이상
- **pnpm**: 패키지 매니저
- **Turborepo**: 모노레포 빌드
- **Vite**: 개발 서버 및 빌드

### **MCP 설정**

- **자동 관리**: Cursor IDE가 MCP 서버 자동 관리
- **stdio 통신**: 로컬 프로세스 간 안전한 통신
- **백그라운드 실행 불필요**: 프로세스 관리 자동화

### **IDE 설정**

- **VSCode Extensions**: ESLint, Prettier, TypeScript
- **Cursor Rules**: 이 파일 (.cursorrules)
- **MCP Integration**: AI 코드 생성

---

## 📚 **Documentation References**

### **📋 프로젝트별 문서**

- **[📖 전체 문서 인덱스](./docs/README.md)**: 모든 프로젝트 문서 통합 인덱스
- **[🎯 Primes 가이드](./docs/primes/README.md)**: Primes 프로젝트 완전 가이드
- **[🌱 ESG 가이드](./docs/esg/README.md)**: ESG 프로젝트 개발 문서
- **[🤖 AIPS 가이드](./docs/aips/README.md)**: AI 기반 생산성 시스템
- **[📦 SCM 가이드](./docs/scm/README.md)**: 공급망 관리 시스템

### **🛠️ MCP 시스템 문서**

- **[🛠️ MCP 메인 가이드](./docs/mcp/README.md)**: MCP 시스템 완전 가이드
- **[🎨 템플릿 사용법](./docs/mcp/template-usage-guide.md)**: 템플릿 시스템 상세 사용법
- **[🔄 Swagger 동기화](./docs/mcp/swagger-sync-guide.md)**: API 스키마 동기화 시스템

### **🛡️ 품질 관리 문서**

- **[🏆 GS 인증 가이드](./docs/primes/gs-certification.md)**: GS 인증 요구사항 및 개발 패턴
- **[📋 GS 구현 계획](./docs/primes/gs-implementation-plan.md)**: 단계별 구현 계획 및 코드 예시
- **[🧪 테스트 전략](./docs/primes/testing-strategy.md)**: 로그인 기반 API 테스트 완전 가이드

### **🏗️ 공통 리소스**

- **[📊 프로젝트 현황](./docs/common/project-status-analysis.md)**: 전체 프로젝트 상태 분석
- **[⭐ 베스트 프랙티스](./mcp/best_practices_guide.md)**: 개발 베스트 프랙티스 가이드
- **[📦 컴포넌트 인벤토리](./mcp/patterns/packages_inventory.py)**: 패키지 구조 및 컴포넌트 분석

### **🚀 빠른 참조**

- **새 기능 개발**: `sg-overview` → `sg-suggest` → `swagger` → `pp` → `pv`
- **코드 개선**: `sg-validate` → `pfix` → `pv`
- **문서 확인**: 해당 프로젝트 docs 디렉토리 참조
- **패턴 검증**: MCP 명령어 또는 해당 프로젝트 가이드 참조

---

## ⚠️ **중요한 개발 규칙**

### **🚨 필수 확인사항**

1. **프로젝트 확인**: 작업 전 반드시 프로젝트 선택
2. **문서 우선**: 해당 프로젝트 문서 먼저 확인
3. **MCP 우선**: 수동 코딩보다 MCP 시스템 활용
4. **Swagger 검증**: 모든 API 관련 작업 시 필수

### **🎯 품질 보장**

- **cleanedParams**: 모든 API 호출에서 필수
- **Atomic Hooks**: 단일 책임 원칙 준수
- **Type Safety**: TypeScript strict mode 활용
- **Accessibility**: WCAG 2.1 AA 기준 준수

### **🔄 지속적 개선**

- **코드 리뷰**: 생성된 코드도 검토 필수
- **성능 모니터링**: 번들 크기 및 로딩 시간 추적
- **사용자 피드백**: 실제 사용성 개선

---

**💡 모든 개발 작업 시 해당 프로젝트의 docs 디렉토리를 먼저 확인하여 최신 가이드라인을 따르세요.**

**🎯 목표: 개발자가 아닌 사람도 AI와 함께 고품질 소프트웨어를 개발할 수 있는 환경 구축**
